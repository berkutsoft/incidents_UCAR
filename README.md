# Incidents App
## Фичи приложения
> 
  1. Запуск приложения и бд в докер контейнере. 
  2. Документация по API в Swagger с примерами запросов и ответов
  3. Пагинация и фильтрация по статусу для списка инцидентов
  4. Валидация входных данных. 
  5. Поддержка миграций


# Запуск app и db в docker
## Сборка образов
``` sh
docker compose build
```
## Запуск контейнеров
``` sh 
docker compose up -d
```

Сервер доступен по адресу
http://127.0.0.1:8600/

Swagger документация
http://127.0.0.1:8600/openapi/swagger

Ендпоинты:
- GET http://127.0.0.1:8600/api/v1/incidents/ - получение списка инцидентов

- GET http://127.0.0.1:8600/api/v1/incidents/{int:id} - получение инцидента по id

- POST http://127.0.0.1:8600/api/v1/incidents/ - создание инцидента

- PUT http://127.0.0.1:8600/api/v1/incidents/{int:id} - Обновить инцидент по id



## Для локальной разработки
Установить пакетный менеджер uv если не установлен
Для macOS и Linux

```sh
curl -LsSf https://astral.sh/uv/install.sh | sh
```
Устанавливаем версию python
```sh
uv python install 3.12.8
```

Инициализация окружения 
```sh
uv venv
```
Установка зависимостей
```sh
uv  sync
```
После чего проект можно запускать не в контейнере
```sh 
python wsgi.py
```
>Правда для этого всё равно придётся поднимать контейнеры с бд

# Миграции

Создание или проведение миграций на момент первого запуска приложения не требуется, тк бд будет создаваться пустая со всей необходимой структурой таблиц. Сделал просто для демонстрации навыков. 

## Создание новой миграции
```sh
alembic revision --autogenerate -m "message"
```
## Применение миграции к бд
```sh
alembic upgrade head
```
## Откат миграции к предыдущей версии алембика
```sh
alembic downgrade -1
```

Всё тоже самое можно сделать внутри контейнера не поднимая проект локально.
например
```sh
docker compose exec app uv run alembic revision --autogenerate -m "message"
```


